---
sidebar_position: 9
---

# 9.1. 公共业务组件

### 9.1.1. 字段钻取组件（`DrillComponent`）

<maintainer title="此组件维护者" authors={["wy"]}/>

### 9.1.2. 关系透视图组件（`RelationalPivot`）

#### 简介

关系透视图公用组件用于统一展示关系透视图的样式，包括透视图的标题、Tabs 、弹框样式等。通过定义不同模板组件的形式进行交叉引用。

![关系透视图组件](/relational_pivot.png)

#### 参数

| 参数             | 说明            | 类型                                            | 默认值 |
|----------------|---------------|-----------------------------------------------|-----|
| modules        | 需要展示的模板       | `Record<RelationalModule.KEY, ModuleProps>[]` | -   |
| modal（可选）      | 弹框传入的实例       | `modalChildrenProps`                          | -   |
| otherProps（可选） | 需要传入到每个子模板的参数 | `any`                                         | -   |
| navs（可选）       | 渲染面包屑         | `string[]`                                    | -   |

#### 使用

```tsx
Modal.open({
  children: (
    <RelationalPivot
      modules={[
        {
          [RelationalModule.SCRIPT_EVENT]: {
            targetKey: "123",
          }, // 引用脚本事件的模板
        },
      ]}
      otherProps={{name: 'aPaaS'}}
      navs={["业务对象-XXX对象", "业务对象-XXX字段"]}
    />
  ),
});
```

#### 弹框样式

弹框样式分为`默认属性`（可被外部 modal 传参覆盖）和`共用属性`(不可覆盖)。一般情况下 modal 参数只需要传 `title`
和 `children` 即可。

**默认属性**

| 参数        | 类型                    | 默认值             |
|-----------|-----------------------|-----------------|
| title     | `string`              | 依赖查询            |
| bodyStyle | `React.CSSProperties` | { height: 600 } |
| style     | `React.CSSProperties` | { width: 957 }  |

**共用属性**

| 参数             | 类型                                       | 默认值                                      |
|----------------|------------------------------------------|------------------------------------------|
| closable       | `boolean`                                | true                                     |
| cancelText     | `string`                                 | 关闭                                       |
| destroyOnClose | `boolean`                                | true                                     |
| footer         | `(okBtn, cancelBtn, modal) => ReactNode` | (_, cancelBtn) => <div>{cancelBtn}</div> |

:::tip

如果需要修改`共用属性`，请提出需求后再统一修改。

:::

#### 新增一个模板流程

1. 维护模块的 key 值，在 `constants/code.ts` 下 `RelationalModule` 变量新增一个 key。
2. 维护模块的名称，在 `constants/code.ts` 下 `RelationalModuleMeans` 变量新增一个对应 key 的名称。
3. 维护模块组件所需的类型， 在 `types/relationPivot.ts` 新增模块组件的类型。
4. 把新增模块类型，维护进 `RelationalPivot` 组件的 `modules` 类型中。
5. 新增一个模块组件，强制要求`模块组件的 Props 类型继承自上面新增模块的类型`。

<maintainer title="此组件维护者" authors={["hzm"]}/>


